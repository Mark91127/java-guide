# Ch1. 基本資料型態

## 基本資料型態

在`Java`中有八種基本資料型態。

- `byte`、`short`、`int` 和 `long` 用來儲存整數。
- `float` 和 `double` 用來儲存浮點數。
- `char` 用來儲存單一字元。
- `boolean` 用來儲存布林值。

### 位元組 (byte)

用來儲存數值範圍較小的整數，適合需要節省記憶體的情境。

- 大小：8 位元（1 個位元組）
- 範圍：-128 到 127
- 預設值：0
- 用途：
  - 適合儲存小範圍的整數值，通常在需要節省記憶體時使用。
  - 可以用在資料流、檔案 `I/O` 操作中，尤其是處理二進位數據時。

```java
byte value = 1;

String image = base64; // base64編碼image
byte[] bytes = Base64.getDecoder().decode(image); // return byte[]
```

### 短整數 (short)

用來儲存範圍比 `int` 小但比 `byte` 大的整數值。

- 大小：16 位元（2 個位元組）
- 範圍：-32,768 到 32,767
- 預設值：0
- 用途：
  - 適合用來儲存中等範圍的整數值，當記憶體有限但 `byte` 的範圍不夠時，可以選擇 `short`。
  - 常用在處理需要大於 `byte` 但小於 `int` 的整數數據場景，如簡單的計數器或簡單資料結構中節省空間的整數值。

```java
short value = 1;
```

### 整數 (int)

最常用的整數型態，用來儲存範圍較大的整數。在效能和記憶體佔用上有良好的平衡，因此被廣泛應用。

- 大小：32 位元（4 個位元組）
- 範圍：-2,147,483,648 到 2,147,483,647
- 預設值：0
- 用途：
  - 是 `Java` 中的預設整數型態，適合大部分的整數計算。
  - 常用於計數器、索引、ID、四則運算等情境。
  - 儲存範圍相當廣，能夠應付大多數應用需求，但若需要超過範圍的數值（例如非常大的數據計算），應使用 `long`。

```java
int value = 1;
```

### 長整數 (long)

一種用來儲存範圍更大的整數型態，適合處理非常大的整數值。當 `int` 的範圍不夠用時，就可以使用。

- 大小：64 位元（8 個位元組）
- 範圍：-9,223,372,036,854,775,808 到 9,223,372,036,854,775,807
- 預設值：0L
- 用途：
  - 適合用於需要儲存極大範圍整數的情境，例如金融計算、統計資料、時間戳等。
  - 在數據科學、遊戲開發等應用中，常用於儲存計算結果或時間資訊，以確保不發生溢位。

```java
long value = 0L;
```

在定義 `long` 型態的常數時，數值必須加上 L 或 l（建議使用大寫 L 以避免與數字 1 混淆），否則會被當作 int 處理，若數值超過 int 的範圍會導致錯誤。

### 雙精度浮點數 (double)

一種用來儲存雙精度浮點數的基本資料型態。能夠表示範圍較大且精度較高的小數，是數學和科學計算中常用的資料型態。

- 大小：64 位元（8 個位元組）
- 範圍：±4.9E-324 到 ±1.7976931348623157E308
- 精度：15 至 16 位數
- 預設值：0.0d
- 用途：
  - 適合用於科學計算、金融應用或需要高精度小數計算的情境。
  - 常用於浮點數運算，如面積、體積、距離等數值的計算。

```java
double value = 0.0;
```

### 單精度浮點數 (float)

一種用來儲存單精度浮點數的基本資料型態。float 適合儲存較大範圍但精度要求不高的小數。

- 大小：32 位元（4 個位元組）
- 範圍：±1.4E-45 到 ±3.4028235E38
- 精度：約 6 到 7 位有效數字
- 預設值：0.0f
- 用途：
  - 適合儲存需要小數但精度要求不高的數值，例如溫度、重力、速度等。
  - 常用於需要大量浮點數並且對記憶體需求較嚴格的應用，如遊戲開發、圖形運算。

```java
float value = 0.0f;
```

### 字元 (char)

一種用來儲存單一字元的基本資料型態。char 採用 Unicode 編碼，能夠表示全球範圍內的多種文字和符號。

- 大小：16 位元（2 個位元組）
- 範圍：\u0000（0）到 \uffff（65,535），即所有 Unicode 字元
- 預設值：'\u0000'（空字符）
- 用途：
  - 適合用來儲存單一字符，例如字母、數字、標點符號等。
  - 常用於處理文字內容時，例如初始化單一字母變數，或處理字串中的個別字符。

```java
char value = 'A';
char value1 = 65; // same print A

if(value >= 'A' && value <= 'Z') {
    //do something
}

```

### 布林 (boolean)

一種基本資料型態，用來儲存布林值，表示真或假。

- 大小：理論上是 1 位元（具體大小取決於 JVM 的實現）
- 範圍：true 或 false
- 預設值：false
- 用途：
  - 常用於條件判斷和控制流程，例如 if、while 等語句。
  - 也用來表示某些狀態或開關，例如「已啟用」(enabled) 或「已完成」(completed) 狀態。

```java
boolean isSuccess = true;

if(isSuccess) {
    System.out.println("success");  
}
```

## 溢位 (Overflow)

指的是當數值運算結果超過了資料型態的表示範圍時所產生的錯誤現象。當溢位發生時，數值會「環繞」至該資料型態範圍的起點或終點，導致結果變得不正確。

```java
int maxValue = Integer.MAX_VALUE;
System.out.println("Max Value: " + maxValue); // 2147483647

int overflowedValue = maxValue + 1;
System.out.println("Overflowed Value: " + overflowedValue); // -2147483648
```

**轉型溢位**

當未清楚各資料型態的範圍，透過強制轉型所導致的溢位。

```java
int i = 444;
System.out.println((byte)i); // print -68
```
由於`byte`的範圍比`int`小，所以導致溢位。

**檢測溢位**

使用 `Math` 類別的方法：`Java 8` 引入了 `Math.addExact()`、`Math.subtractExact()` 和 `Math.multiplyExact()` 等方法，當發生溢位時會丟出 `ArithmeticException`。

```java
try {
    int result = Math.addExact(Integer.MAX_VALUE, 1);
} catch (ArithmeticException e) {
    System.out.println("Overflow detected!");
}
```


## 重點整理

- 各個資料型態的預設值。
- 區域變數需強制給值。
- 個個資料型態的範圍，避免轉型發生溢位。
- 範圍順序 byte < short < int < long < double < float。
- 依照情境選擇適當資料型態，如未發生溢位可統一使用`int`，不必過度考慮效能，只需擔心是否發生溢位即可。






